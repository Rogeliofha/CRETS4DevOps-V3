<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRETS4DevOps - Arquitectura del Sistema</title>
    <script src="https://unpkg.com/mermaid@9.4.3/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #0078d4;
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #323130;
            border-bottom: 2px solid #0078d4;
            padding-bottom: 10px;
        }
        .diagram-container {
            margin: 30px 0;
            text-align: center;
            background: #fafafa;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e1e1e1;
        }
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .tech-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .tech-card h3 {
            margin-top: 0;
            font-size: 1.2em;
        }
        .features {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .features ul {
            list-style-type: none;
            padding: 0;
        }
        .features li {
            margin: 10px 0;
            padding: 8px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #0078d4;
        }
        .features li:before {
            content: "‚úì ";
            color: #107c10;
            font-weight: bold;
        }
        /* Estilos para los nodos del diagrama */
        .diagram-container .mermaid {
            font-family: 'Segoe UI', sans-serif;
        }
        /* Agregar iconos como pseudo-elementos */
        .icon-user::before { content: "üë§ "; }
        .icon-azure::before { content: "üåê "; }
        .icon-extension::before { content: "üì± "; }
        .icon-react::before { content: "‚öõÔ∏è "; }
        .icon-data::before { content: "üíæ "; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üå± CRETS4DevOps - Arquitectura del Sistema</h1>
        
        <h2>Diagrama de Arquitectura Principal</h2>
        <div class="diagram-container">
            <div class="mermaid">
                graph TB
                    User["DevOps Team<br/>Usuario"] --> AzureDevOps["Azure DevOps<br/>Platform"]
                    
                    AzureDevOps --> WorkItems["Work Items<br/>Azure Boards"]
                    AzureDevOps --> Extension["Browser Extension<br/>CRETS4DevOps"]
                    
                    Extension --> Frontend["React Frontend<br/>TypeScript"]
                    Extension --> SDK["Azure DevOps SDK<br/>Integration Layer"]
                    
                    Frontend --> Components["React Components<br/>RequirementItem, Forms"]
                    Frontend --> Styling["CSS Styling<br/>UI/UX Layer"]
                    
                    SDK --> DataLayer["Data Management<br/>Persistence Layer"]
                    
                    DataLayer --> LocalStorage["localStorage<br/>Browser Storage"]
                    DataLayer --> JSONFiles["JSON Files<br/>Requirements Data"]
                    
                    LocalStorage --> Requirements["Sustainability<br/>Requirements"]
                    JSONFiles --> Requirements
                    
                    Requirements --> WorkItems
                    
                    style User fill:#e1f5fe
                    style AzureDevOps fill:#f3e5f5
                    style Extension fill:#e8f5e8
                    style Frontend fill:#fff3e0
                    style DataLayer fill:#fce4ec
            </div>
        </div>

        <h2>Flujo de Datos y Procesos</h2>
        <div class="diagram-container">
            <div class="mermaid">
                sequenceDiagram
                    participant U as Usuario
                    participant AD as Azure DevOps
                    participant C as CRETS4DevOps
                    participant LS as localStorage
                    participant WI as Work Item
                    
                    U->>AD: Abre Work Item
                    AD->>C: Carga Extension
                    C->>LS: Lee requisitos guardados
                    LS->>C: Retorna datos
                    C->>U: Muestra interfaz
                    U->>C: Selecciona requisitos
                    C->>LS: Guarda selecci√≥n
                    C->>WI: Aplica requisitos
                    WI->>AD: Actualiza Work Item
                    AD->>U: Confirma cambios
            </div>
        </div>

        <h2>Stack Tecnol√≥gico</h2>
        <div class="tech-stack">
            <div class="tech-card">
                <h3>‚öõÔ∏è Frontend</h3>
                <p>React + TypeScript</p>
                <small>Interfaz de usuario moderna y tipada</small>
            </div>
            <div class="tech-card">
                <h3>üîß Integration</h3>
                <p>Azure DevOps SDK</p>
                <small>Conexi√≥n nativa con la plataforma</small>
            </div>
            <div class="tech-card">
                <h3>üíæ Persistencia</h3>
                <p>localStorage + JSON</p>
                <small>Almacenamiento local y archivos</small>
            </div>
            <div class="tech-card">
                <h3>üé® Styling</h3>
                <p>CSS3 + Webpack</p>
                <small>Dise√±o responsive y modular</small>
            </div>
        </div>

        <h2>Caracter√≠sticas Principales</h2>
        <div class="features">
            <ul>
                <li>Gesti√≥n jer√°rquica de requisitos de sostenibilidad</li>
                <li>Integraci√≥n nativa con Azure DevOps Work Items</li>
                <li>Interfaz React moderna y responsive</li>
                <li>Persistencia autom√°tica en navegador</li>
                <li>CRUD completo de requisitos</li>
                <li>B√∫squeda y filtrado avanzado</li>
                <li>Validaci√≥n de c√≥digos jer√°rquicos</li>
                <li>Aplicaci√≥n directa a Work Items</li>
            </ul>
        </div>

        <h2>Arquitectura de Componentes</h2>
        <div class="diagram-container">
            <div class="mermaid">
                graph LR
                    Main["SustainabilityRequirements<br/>Componente Principal"] --> Item["RequirementItem<br/>Componente Recursivo"]
                    Main --> Edit["RequirementEditForm<br/>Formulario de Edici√≥n"]
                    Main --> Create["RequirementCreateForm<br/>Formulario de Creaci√≥n"]
                    
                    Item --> Item2["RequirementItem<br/>Hijos Anidados"]
                    Item2 --> Item3["RequirementItem<br/>Sub-hijos"]
                    
                    Main --> State["Estado Global<br/>React Hooks"]
                    State --> Reqs["requirements[]"]
                    State --> Selected["selectedRequirement"]
                    State --> Checked["checkedRequirements[]"]
                    
                    style Main fill:#4caf50
                    style State fill:#2196f3
                    style Item fill:#ff9800
                    style Edit fill:#9c27b0
                    style Create fill:#e91e63
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#0078d4',
                primaryTextColor: '#323130',
                primaryBorderColor: '#605e5c',
                lineColor: '#605e5c',
                secondaryColor: '#e1e1e1',
                tertiaryColor: '#f3f2f1'
            }
        });
    </script>
</body>
</html>
